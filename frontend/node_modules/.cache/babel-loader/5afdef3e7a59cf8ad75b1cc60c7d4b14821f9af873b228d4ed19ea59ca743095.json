{"ast":null,"code":"var _s = $RefreshSig$();\n/**\n * Custom hook for interacting with the ZK Co-Processor smart contract\n * This hook handles all blockchain interactions and provides a clean interface\n * for the React components to use\n */\nimport { useState, useCallback, useEffect, useRef } from 'react';\nimport { ethers } from 'ethers';\n\n// Network configurations\nconst NETWORK_CONFIGS = {\n  // Sepolia testnet\n  sepolia: {\n    chainId: '0xaa36a7',\n    // Sepolia testnet chain ID in hex\n    chainName: 'Sepolia Test Network',\n    nativeCurrency: {\n      name: 'Sepolia Ether',\n      symbol: 'SEP',\n      decimals: 18\n    },\n    rpcUrls: ['https://sepolia.infura.io/v3/'],\n    blockExplorerUrls: ['https://sepolia.etherscan.io']\n  },\n  // Ethereum mainnet\n  mainnet: {\n    chainId: '0x1',\n    // Ethereum mainnet ID in hex\n    chainName: 'Ethereum Mainnet',\n    nativeCurrency: {\n      name: 'Ether',\n      symbol: 'ETH',\n      decimals: 18\n    },\n    rpcUrls: ['https://mainnet.infura.io/v3/'],\n    blockExplorerUrls: ['https://etherscan.io']\n  }\n};\n\n// ABI for our ZKCoProcessor contract\nconst ZKCoProcessorABI = [\"event ComputationRequested(bytes32 indexed taskId, address requester, uint256 complexity, uint256 reward)\", \"event ProofSubmitted(bytes32 indexed taskId, address operator, bytes32 resultHash)\", \"event ComparisonLogged(uint256 zkGasUsed, uint256 normalGasUsed, uint256 timeSaved)\", \"event RewardPaid(address indexed operator, uint256 amount, bytes32 indexed taskId)\", \"event OperatorRegistered(address indexed operator, uint256 stake)\", \"function requestComputation(bytes calldata inputData) external payable\", \"function submitProof(bytes32 taskId, bytes calldata proof, bytes32 resultHash) external\", \"function logComparison(uint256 zkGasUsed, uint256 normalGasUsed, uint256 timeSaved) external\", \"function tasks(bytes32) external view returns (bool completed, uint256 startTime, uint256 endTime, uint256 reward, address operator, uint256 complexity, bytes32 resultHash, bool verified)\", \"function totalTasksProcessed() external view returns (uint256)\"];\n\n/**\n * Custom hook to interact with the ZK Co-Processor contract\n * @returns {Object} Functions and state variables for interacting with the contract\n */\nexport const useZKVerifier = () => {\n  _s();\n  // State variables\n  const [contract, setContract] = useState(null);\n  // eslint-disable-next-line no-unused-vars\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [account, setAccount] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [isCorrectNetwork, setIsCorrectNetwork] = useState(false);\n  const [networkId, setNetworkId] = useState('');\n  const [networkName, setNetworkName] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [initialized, setInitialized] = useState(false);\n\n  // Store recent comparisons - limited to 5 for better performance\n  const [recentComparisons, setRecentComparisons] = useState([]);\n\n  // Get contract address from environment variables\n  const contractAddress = process.env.REACT_APP_CONTRACT_ADDRESS || \"0x1234567890123456789012345678901234567890\";\n\n  // Use useRef to maintain event listener references for cleanup\n  const eventListeners = useRef({\n    chainChanged: null,\n    accountsChanged: null,\n    comparison: null\n  });\n\n  /**\n   * Simulate a comparison for demonstration purposes\n   * In a real implementation, comparisons would come from actual processing\n   * @param {number} complexity - The complexity of the task\n   * @param {string} inputData - The original input data (optional)\n   */\n  const simulateComparison = useCallback((complexity, inputData = '') => {\n    if (!contract) return;\n    try {\n      // Calculate simulated gas usage based on input complexity\n      const zkGasUsed = Math.floor(10000 + complexity * 50);\n      const normalGasUsed = Math.floor(zkGasUsed * (2 + Math.random() * 3)); // 2-5x more gas for normal processing\n      const timeSaved = Math.floor(complexity * (1 + Math.random() * 2));\n\n      // Store original input data for reference in UI\n      // In a real app, this would be stored in a database or emitted in an event\n      localStorage.setItem('lastInputData', inputData);\n\n      // Log the comparison to the contract (this will trigger the event listener)\n      contract.logComparison(zkGasUsed, normalGasUsed, timeSaved);\n    } catch (error) {\n      console.error(\"Error simulating comparison:\", error);\n    }\n  }, [contract]);\n\n  /**\n   * Function to check which network the user is currently on\n   * @returns {Promise<Object>} Network information\n   */\n  const checkNetwork = useCallback(async () => {\n    if (!window.ethereum) return {\n      isCorrect: false,\n      id: '',\n      name: 'Not Connected'\n    };\n    try {\n      const chainId = await window.ethereum.request({\n        method: 'eth_chainId'\n      });\n      let networkName = 'Unknown Network';\n      let isCorrect = false;\n      let networkId = '';\n\n      // Check if on Sepolia (our target network)\n      if (chainId === NETWORK_CONFIGS.sepolia.chainId) {\n        networkName = 'Sepolia Testnet';\n        isCorrect = true;\n        networkId = 'sepolia';\n      }\n      // Check if on Ethereum mainnet\n      else if (chainId === NETWORK_CONFIGS.mainnet.chainId) {\n        networkName = 'Ethereum Mainnet';\n        networkId = 'mainnet';\n      }\n      // Other common networks\n      else if (chainId === '0x5') {\n        networkName = 'Goerli Testnet';\n      } else if (chainId === '0x89') {\n        networkName = 'Polygon';\n      } else {\n        networkName = `Unknown (${chainId})`;\n      }\n      setIsCorrectNetwork(isCorrect);\n      setNetworkName(networkName);\n      setNetworkId(networkId);\n      return {\n        isCorrect,\n        id: networkId,\n        name: networkName,\n        chainId\n      };\n    } catch (error) {\n      console.error(\"Error checking network:\", error);\n      return {\n        isCorrect: false,\n        id: '',\n        name: 'Error'\n      };\n    }\n  }, []);\n\n  /**\n   * Switch networks\n   * @param {string} targetNetwork - Network ID to switch to ('sepolia' or 'mainnet')\n   * @returns {Promise<boolean>} Success status\n   */\n  const switchNetwork = useCallback(async targetNetwork => {\n    if (!window.ethereum) return false;\n    try {\n      const config = NETWORK_CONFIGS[targetNetwork];\n      if (!config) {\n        console.error(`Invalid network: ${targetNetwork}`);\n        return false;\n      }\n\n      // Try to switch to the target network\n      try {\n        await window.ethereum.request({\n          method: 'wallet_switchEthereumChain',\n          params: [{\n            chainId: config.chainId\n          }]\n        });\n        return true;\n      } catch (switchError) {\n        // This error code indicates that the chain has not been added to MetaMask\n        if (switchError.code === 4902) {\n          try {\n            await window.ethereum.request({\n              method: 'wallet_addEthereumChain',\n              params: [config]\n            });\n            return true;\n          } catch (addError) {\n            console.error(`Error adding ${targetNetwork} network:`, addError);\n            return false;\n          }\n        }\n        console.error(`Error switching to ${targetNetwork}:`, switchError);\n        return false;\n      }\n    } catch (error) {\n      console.error(\"Error switching networks:\", error);\n      return false;\n    }\n  }, []);\n\n  /**\n   * Helper function to switch to Sepolia\n   * @returns {Promise<boolean>} Success status\n   */\n  const switchToSepolia = useCallback(async () => {\n    return await switchNetwork('sepolia');\n  }, [switchNetwork]);\n\n  /**\n   * Helper function to switch to Ethereum Mainnet\n   * @returns {Promise<boolean>} Success status\n   */\n  const switchToMainnet = useCallback(async () => {\n    return await switchNetwork('mainnet');\n  }, [switchNetwork]);\n\n  /**\n   * Initialize the contract and web3 connection\n   * @returns {Promise<boolean>} Success status\n   */\n  const initializeWeb3 = useCallback(async () => {\n    if (!window.ethereum) {\n      console.error(\"Ethereum provider not found. Please install MetaMask.\");\n      return false;\n    }\n    try {\n      // Check which network we're on\n      // eslint-disable-next-line no-unused-vars\n      const {\n        isCorrect,\n        chainId\n      } = await checkNetwork();\n\n      // Request account access\n      const accounts = await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      });\n      if (accounts.length === 0) {\n        setIsConnected(false);\n        setAccount(null);\n        return false;\n      }\n\n      // Create a Web3Provider\n      const web3Provider = new ethers.providers.Web3Provider(window.ethereum);\n      setProvider(web3Provider);\n\n      // Get the signer\n      const web3Signer = web3Provider.getSigner();\n      setSigner(web3Signer);\n\n      // Set account\n      setAccount(accounts[0]);\n      setIsConnected(true);\n\n      // Create contract instance\n      const zkContract = new ethers.Contract(contractAddress, ZKCoProcessorABI, web3Signer);\n      setContract(zkContract);\n\n      // Set up comparison event listener\n      const comparisonListener = (zkGasUsed, normalGasUsed, timeSaved) => {\n        const newComparison = {\n          zkGasUsed: zkGasUsed.toNumber(),\n          normalGasUsed: normalGasUsed.toNumber(),\n          timeSaved: timeSaved.toNumber(),\n          isNew: true,\n          // Flag to indicate this is a new entry for animation\n          timestamp: Date.now() // Add timestamp for sorting\n        };\n        setRecentComparisons(prev => {\n          // Add the new comparison to the top and keep only the 5 most recent entries\n          const newComparisons = [newComparison, ...prev.slice(0, 4)];\n\n          // After a delay, remove the isNew flag to stop the animation\n          setTimeout(() => {\n            setRecentComparisons(current => current.map((comp, i) => i === 0 ? {\n              ...comp,\n              isNew: false\n            } : comp));\n          }, 3000);\n          return newComparisons;\n        });\n      };\n\n      // Save event listener reference for cleanup\n      eventListeners.current.comparison = comparisonListener;\n      zkContract.on(\"ComparisonLogged\", comparisonListener);\n      setInitialized(true);\n      return true;\n    } catch (error) {\n      console.error(\"Error initializing Web3:\", error);\n      setIsConnected(false);\n      return false;\n    }\n  }, [contractAddress, checkNetwork]);\n\n  /**\n   * Setup event listeners for MetaMask events\n   */\n  const setupEventListeners = useCallback(() => {\n    if (!window.ethereum) return;\n\n    // Listen for network changes\n    const chainChangedListener = _chainId => {\n      // Reset the entire app state when network changes\n      window.location.reload();\n    };\n\n    // Listen for account changes\n    const accountsChangedListener = accounts => {\n      if (accounts.length > 0) {\n        setAccount(accounts[0]);\n        // Re-initialize contract with new signer\n        initializeWeb3();\n      } else {\n        setIsConnected(false);\n        setAccount(null);\n      }\n    };\n\n    // Save listener references for cleanup\n    eventListeners.current.chainChanged = chainChangedListener;\n    eventListeners.current.accountsChanged = accountsChangedListener;\n    window.ethereum.on('chainChanged', chainChangedListener);\n    window.ethereum.on('accountsChanged', accountsChangedListener);\n  }, [initializeWeb3]);\n\n  /**\n   * Cleanup event listeners\n   */\n  const cleanupEventListeners = useCallback(() => {\n    // Remove contract listeners\n    if (contract && eventListeners.current.comparison) {\n      contract.removeListener(\"ComparisonLogged\", eventListeners.current.comparison);\n    }\n\n    // Remove ethereum provider listeners\n    if (window.ethereum) {\n      if (eventListeners.current.chainChanged) {\n        window.ethereum.removeListener('chainChanged', eventListeners.current.chainChanged);\n      }\n      if (eventListeners.current.accountsChanged) {\n        window.ethereum.removeListener('accountsChanged', eventListeners.current.accountsChanged);\n      }\n    }\n  }, [contract]);\n\n  // Initialize web3 and set up event listeners when component mounts\n  useEffect(() => {\n    const init = async () => {\n      await initializeWeb3();\n      setupEventListeners();\n    };\n    init();\n\n    // Cleanup event listeners when component unmounts\n    return () => {\n      cleanupEventListeners();\n    };\n  }, [initializeWeb3, setupEventListeners, cleanupEventListeners]);\n\n  /**\n   * Request computation function - sends a transaction to the smart contract\n   * @param {string} inputData - The data to be processed by the ZK Co-Processor\n   * @returns {Promise<object>} The transaction receipt\n   */\n  const requestComputation = useCallback(async inputData => {\n    if (!window.ethereum) {\n      throw new Error(\"MetaMask not installed. Please install MetaMask.\");\n    }\n    if (!isConnected) {\n      // Try to connect\n      const success = await initializeWeb3();\n      if (!success) {\n        throw new Error(\"Failed to connect to wallet. Please try again.\");\n      }\n    }\n    if (!contract || !signer) {\n      throw new Error(\"Web3 not initialized. Please try refreshing the page.\");\n    }\n\n    // Make sure we're on Sepolia\n    if (!isCorrectNetwork) {\n      const switched = await switchToSepolia();\n      if (!switched) {\n        throw new Error(`Please switch to Sepolia testnet. You are currently on ${networkName}.`);\n      }\n\n      // Wait for network switch to complete\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Re-initialize web3 after network switch\n      await initializeWeb3();\n\n      // If still not on the correct network, throw error\n      if (!isCorrectNetwork) {\n        throw new Error(\"Network switch didn't complete properly. Please refresh and try again.\");\n      }\n    }\n    setIsLoading(true);\n    try {\n      // Convert input data to bytes\n      const inputBytes = ethers.utils.toUtf8Bytes(inputData);\n\n      // Estimate the cost (task complexity based on data size)\n      const complexity = inputBytes.length;\n      const baseReward = ethers.utils.parseEther(\"0.001\");\n      // eslint-disable-next-line no-unused-vars\n      const estimatedReward = baseReward.mul(ethers.BigNumber.from(1 + Math.floor(complexity / 100)));\n\n      // This is a testnet, so we're not using real ETH\n      // We'll just pay a minimal gas fee\n      const minimalPayment = ethers.utils.parseEther(\"0.0001\");\n\n      // Send transaction with the reward amount (minimal on testnet)\n      const tx = await contract.requestComputation(inputBytes, {\n        value: minimalPayment\n      });\n      const receipt = await tx.wait();\n\n      // After transaction, simulate a comparison for demonstration purposes\n      // In a production app, this would come from actual on-chain events\n      setTimeout(() => {\n        simulateComparison(complexity, inputData);\n      }, 2000);\n      return receipt;\n    } catch (error) {\n      console.error(\"Error requesting computation:\", error);\n      throw error;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [contract, signer, isConnected, isCorrectNetwork, switchToSepolia, networkName, simulateComparison, initializeWeb3]);\n\n  /**\n   * Get total tasks processed from the contract\n   * @returns {Promise<number>} Total tasks processed\n   */\n  const getTotalTasksProcessed = useCallback(async () => {\n    if (!contract) {\n      // If contract is not initialized, return mock data for demonstration\n      return 12; // Default mock value\n    }\n    try {\n      const total = await contract.totalTasksProcessed();\n      return total.toNumber();\n    } catch (error) {\n      console.error(\"Error getting total tasks:\", error);\n      return 12; // Fallback to mock data on error\n    }\n  }, [contract]);\n\n  /**\n   * Get the latest comparison data\n   * @returns {Array} Array of comparison objects with zkGasUsed, normalGasUsed, timeSaved\n   */\n  const getLatestComparisons = useCallback(() => {\n    // Return the stored recent comparisons\n    if (recentComparisons.length === 0) {\n      // If no comparisons yet, return some mock data for demonstration\n      return [{\n        zkGasUsed: 25000,\n        normalGasUsed: 75000,\n        timeSaved: 120,\n        isNew: false,\n        timestamp: Date.now() - 1000\n      }, {\n        zkGasUsed: 15000,\n        normalGasUsed: 65000,\n        timeSaved: 95,\n        isNew: false,\n        timestamp: Date.now() - 2000\n      }, {\n        zkGasUsed: 30000,\n        normalGasUsed: 85000,\n        timeSaved: 150,\n        isNew: false,\n        timestamp: Date.now() - 3000\n      }];\n    }\n    return recentComparisons;\n  }, [recentComparisons]);\n\n  /**\n   * Connect to MetaMask (or other Web3 provider)\n   * @returns {Promise<boolean>} Success status\n   */\n  const connectWallet = useCallback(async () => {\n    if (!window.ethereum) {\n      alert(\"MetaMask is not installed. Please install MetaMask to use this application.\");\n      return false;\n    }\n    try {\n      const success = await initializeWeb3();\n      if (success && !isCorrectNetwork) {\n        await switchToSepolia();\n        // Re-initialize after network switch\n        await initializeWeb3();\n      }\n      return success;\n    } catch (error) {\n      console.error(\"Error connecting to wallet:\", error);\n      return false;\n    }\n  }, [initializeWeb3, isCorrectNetwork, switchToSepolia]);\n\n  /**\n   * Toggle between Sepolia and Mainnet\n   * Switches to the opposite network from the current one\n   * @returns {Promise<boolean>} Success status\n   */\n  const toggleNetwork = useCallback(async () => {\n    if (networkId === 'sepolia') {\n      return await switchToMainnet();\n    } else {\n      return await switchToSepolia();\n    }\n  }, [networkId, switchToMainnet, switchToSepolia]);\n  return {\n    requestComputation,\n    getTotalTasksProcessed,\n    getLatestComparisons,\n    isConnected,\n    isCorrectNetwork,\n    account,\n    networkName,\n    networkId,\n    connectWallet,\n    switchToSepolia,\n    switchToMainnet,\n    toggleNetwork,\n    isLoading,\n    initialized\n  };\n};\n_s(useZKVerifier, \"qOnW/GJyMA059M7D7VenjWwHdK0=\");","map":{"version":3,"names":["useState","useCallback","useEffect","useRef","ethers","NETWORK_CONFIGS","sepolia","chainId","chainName","nativeCurrency","name","symbol","decimals","rpcUrls","blockExplorerUrls","mainnet","ZKCoProcessorABI","useZKVerifier","_s","contract","setContract","provider","setProvider","signer","setSigner","account","setAccount","isConnected","setIsConnected","isCorrectNetwork","setIsCorrectNetwork","networkId","setNetworkId","networkName","setNetworkName","isLoading","setIsLoading","initialized","setInitialized","recentComparisons","setRecentComparisons","contractAddress","process","env","REACT_APP_CONTRACT_ADDRESS","eventListeners","chainChanged","accountsChanged","comparison","simulateComparison","complexity","inputData","zkGasUsed","Math","floor","normalGasUsed","random","timeSaved","localStorage","setItem","logComparison","error","console","checkNetwork","window","ethereum","isCorrect","id","request","method","switchNetwork","targetNetwork","config","params","switchError","code","addError","switchToSepolia","switchToMainnet","initializeWeb3","accounts","length","web3Provider","providers","Web3Provider","web3Signer","getSigner","zkContract","Contract","comparisonListener","newComparison","toNumber","isNew","timestamp","Date","now","prev","newComparisons","slice","setTimeout","current","map","comp","i","on","setupEventListeners","chainChangedListener","_chainId","location","reload","accountsChangedListener","cleanupEventListeners","removeListener","init","requestComputation","Error","success","switched","Promise","resolve","inputBytes","utils","toUtf8Bytes","baseReward","parseEther","estimatedReward","mul","BigNumber","from","minimalPayment","tx","value","receipt","wait","getTotalTasksProcessed","total","totalTasksProcessed","getLatestComparisons","connectWallet","alert","toggleNetwork"],"sources":["/Users/duy/Documents/project/zkco/frontend/src/hooks/useZKVerifier.js"],"sourcesContent":["/**\n * Custom hook for interacting with the ZK Co-Processor smart contract\n * This hook handles all blockchain interactions and provides a clean interface\n * for the React components to use\n */\nimport { useState, useCallback, useEffect, useRef } from 'react';\nimport { ethers } from 'ethers';\n\n// Network configurations\nconst NETWORK_CONFIGS = {\n  // Sepolia testnet\n  sepolia: {\n    chainId: '0xaa36a7', // Sepolia testnet chain ID in hex\n    chainName: 'Sepolia Test Network',\n    nativeCurrency: {\n      name: 'Sepolia Ether',\n      symbol: 'SEP',\n      decimals: 18\n    },\n    rpcUrls: ['https://sepolia.infura.io/v3/'],\n    blockExplorerUrls: ['https://sepolia.etherscan.io']\n  },\n  // Ethereum mainnet\n  mainnet: {\n    chainId: '0x1', // Ethereum mainnet ID in hex\n    chainName: 'Ethereum Mainnet',\n    nativeCurrency: {\n      name: 'Ether',\n      symbol: 'ETH',\n      decimals: 18\n    },\n    rpcUrls: ['https://mainnet.infura.io/v3/'],\n    blockExplorerUrls: ['https://etherscan.io']\n  }\n};\n\n// ABI for our ZKCoProcessor contract\nconst ZKCoProcessorABI = [\n  \"event ComputationRequested(bytes32 indexed taskId, address requester, uint256 complexity, uint256 reward)\",\n  \"event ProofSubmitted(bytes32 indexed taskId, address operator, bytes32 resultHash)\",\n  \"event ComparisonLogged(uint256 zkGasUsed, uint256 normalGasUsed, uint256 timeSaved)\",\n  \"event RewardPaid(address indexed operator, uint256 amount, bytes32 indexed taskId)\",\n  \"event OperatorRegistered(address indexed operator, uint256 stake)\",\n  \"function requestComputation(bytes calldata inputData) external payable\",\n  \"function submitProof(bytes32 taskId, bytes calldata proof, bytes32 resultHash) external\",\n  \"function logComparison(uint256 zkGasUsed, uint256 normalGasUsed, uint256 timeSaved) external\",\n  \"function tasks(bytes32) external view returns (bool completed, uint256 startTime, uint256 endTime, uint256 reward, address operator, uint256 complexity, bytes32 resultHash, bool verified)\",\n  \"function totalTasksProcessed() external view returns (uint256)\"\n];\n\n/**\n * Custom hook to interact with the ZK Co-Processor contract\n * @returns {Object} Functions and state variables for interacting with the contract\n */\nexport const useZKVerifier = () => {\n  // State variables\n  const [contract, setContract] = useState(null);\n  // eslint-disable-next-line no-unused-vars\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [account, setAccount] = useState(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [isCorrectNetwork, setIsCorrectNetwork] = useState(false);\n  const [networkId, setNetworkId] = useState('');\n  const [networkName, setNetworkName] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [initialized, setInitialized] = useState(false);\n  \n  // Store recent comparisons - limited to 5 for better performance\n  const [recentComparisons, setRecentComparisons] = useState([]);\n\n  // Get contract address from environment variables\n  const contractAddress = process.env.REACT_APP_CONTRACT_ADDRESS || \"0x1234567890123456789012345678901234567890\";\n  \n  // Use useRef to maintain event listener references for cleanup\n  const eventListeners = useRef({\n    chainChanged: null,\n    accountsChanged: null,\n    comparison: null\n  });\n\n  /**\n   * Simulate a comparison for demonstration purposes\n   * In a real implementation, comparisons would come from actual processing\n   * @param {number} complexity - The complexity of the task\n   * @param {string} inputData - The original input data (optional)\n   */\n  const simulateComparison = useCallback((complexity, inputData = '') => {\n    if (!contract) return;\n    \n    try {\n      // Calculate simulated gas usage based on input complexity\n      const zkGasUsed = Math.floor(10000 + (complexity * 50));\n      const normalGasUsed = Math.floor(zkGasUsed * (2 + Math.random() * 3)); // 2-5x more gas for normal processing\n      const timeSaved = Math.floor(complexity * (1 + Math.random() * 2));\n      \n      // Store original input data for reference in UI\n      // In a real app, this would be stored in a database or emitted in an event\n      localStorage.setItem('lastInputData', inputData);\n      \n      // Log the comparison to the contract (this will trigger the event listener)\n      contract.logComparison(zkGasUsed, normalGasUsed, timeSaved);\n    } catch (error) {\n      console.error(\"Error simulating comparison:\", error);\n    }\n  }, [contract]);\n\n  /**\n   * Function to check which network the user is currently on\n   * @returns {Promise<Object>} Network information\n   */\n  const checkNetwork = useCallback(async () => {\n    if (!window.ethereum) return { isCorrect: false, id: '', name: 'Not Connected' };\n    \n    try {\n      const chainId = await window.ethereum.request({ method: 'eth_chainId' });\n      let networkName = 'Unknown Network';\n      let isCorrect = false;\n      let networkId = '';\n      \n      // Check if on Sepolia (our target network)\n      if (chainId === NETWORK_CONFIGS.sepolia.chainId) {\n        networkName = 'Sepolia Testnet';\n        isCorrect = true;\n        networkId = 'sepolia';\n      } \n      // Check if on Ethereum mainnet\n      else if (chainId === NETWORK_CONFIGS.mainnet.chainId) {\n        networkName = 'Ethereum Mainnet';\n        networkId = 'mainnet';\n      }\n      // Other common networks\n      else if (chainId === '0x5') {\n        networkName = 'Goerli Testnet';\n      } else if (chainId === '0x89') {\n        networkName = 'Polygon';\n      } else {\n        networkName = `Unknown (${chainId})`;\n      }\n      \n      setIsCorrectNetwork(isCorrect);\n      setNetworkName(networkName);\n      setNetworkId(networkId);\n      \n      return { isCorrect, id: networkId, name: networkName, chainId };\n    } catch (error) {\n      console.error(\"Error checking network:\", error);\n      return { isCorrect: false, id: '', name: 'Error' };\n    }\n  }, []);\n\n  /**\n   * Switch networks\n   * @param {string} targetNetwork - Network ID to switch to ('sepolia' or 'mainnet')\n   * @returns {Promise<boolean>} Success status\n   */\n  const switchNetwork = useCallback(async (targetNetwork) => {\n    if (!window.ethereum) return false;\n    \n    try {\n      const config = NETWORK_CONFIGS[targetNetwork];\n      if (!config) {\n        console.error(`Invalid network: ${targetNetwork}`);\n        return false;\n      }\n      \n      // Try to switch to the target network\n      try {\n        await window.ethereum.request({\n          method: 'wallet_switchEthereumChain',\n          params: [{ chainId: config.chainId }]\n        });\n        return true;\n      } catch (switchError) {\n        // This error code indicates that the chain has not been added to MetaMask\n        if (switchError.code === 4902) {\n          try {\n            await window.ethereum.request({\n              method: 'wallet_addEthereumChain',\n              params: [config]\n            });\n            return true;\n          } catch (addError) {\n            console.error(`Error adding ${targetNetwork} network:`, addError);\n            return false;\n          }\n        }\n        console.error(`Error switching to ${targetNetwork}:`, switchError);\n        return false;\n      }\n    } catch (error) {\n      console.error(\"Error switching networks:\", error);\n      return false;\n    }\n  }, []);\n\n  /**\n   * Helper function to switch to Sepolia\n   * @returns {Promise<boolean>} Success status\n   */\n  const switchToSepolia = useCallback(async () => {\n    return await switchNetwork('sepolia');\n  }, [switchNetwork]);\n\n  /**\n   * Helper function to switch to Ethereum Mainnet\n   * @returns {Promise<boolean>} Success status\n   */\n  const switchToMainnet = useCallback(async () => {\n    return await switchNetwork('mainnet');\n  }, [switchNetwork]);\n  \n  /**\n   * Initialize the contract and web3 connection\n   * @returns {Promise<boolean>} Success status\n   */\n  const initializeWeb3 = useCallback(async () => {\n    if (!window.ethereum) {\n      console.error(\"Ethereum provider not found. Please install MetaMask.\");\n      return false;\n    }\n    \n    try {\n      // Check which network we're on\n      // eslint-disable-next-line no-unused-vars\n      const { isCorrect, chainId } = await checkNetwork();\n      \n      // Request account access\n      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\n      \n      if (accounts.length === 0) {\n        setIsConnected(false);\n        setAccount(null);\n        return false;\n      }\n      \n      // Create a Web3Provider\n      const web3Provider = new ethers.providers.Web3Provider(window.ethereum);\n      setProvider(web3Provider);\n      \n      // Get the signer\n      const web3Signer = web3Provider.getSigner();\n      setSigner(web3Signer);\n      \n      // Set account\n      setAccount(accounts[0]);\n      setIsConnected(true);\n      \n      // Create contract instance\n      const zkContract = new ethers.Contract(contractAddress, ZKCoProcessorABI, web3Signer);\n      setContract(zkContract);\n      \n      // Set up comparison event listener\n      const comparisonListener = (zkGasUsed, normalGasUsed, timeSaved) => {\n        const newComparison = {\n          zkGasUsed: zkGasUsed.toNumber(),\n          normalGasUsed: normalGasUsed.toNumber(),\n          timeSaved: timeSaved.toNumber(),\n          isNew: true, // Flag to indicate this is a new entry for animation\n          timestamp: Date.now() // Add timestamp for sorting\n        };\n        \n        setRecentComparisons(prev => {\n          // Add the new comparison to the top and keep only the 5 most recent entries\n          const newComparisons = [newComparison, ...prev.slice(0, 4)];\n          \n          // After a delay, remove the isNew flag to stop the animation\n          setTimeout(() => {\n            setRecentComparisons(current => \n              current.map((comp, i) => i === 0 ? { ...comp, isNew: false } : comp)\n            );\n          }, 3000);\n          \n          return newComparisons;\n        });\n      };\n      \n      // Save event listener reference for cleanup\n      eventListeners.current.comparison = comparisonListener;\n      zkContract.on(\"ComparisonLogged\", comparisonListener);\n      \n      setInitialized(true);\n      return true;\n    } catch (error) {\n      console.error(\"Error initializing Web3:\", error);\n      setIsConnected(false);\n      return false;\n    }\n  }, [contractAddress, checkNetwork]);\n  \n  /**\n   * Setup event listeners for MetaMask events\n   */\n  const setupEventListeners = useCallback(() => {\n    if (!window.ethereum) return;\n    \n    // Listen for network changes\n    const chainChangedListener = (_chainId) => {\n      // Reset the entire app state when network changes\n      window.location.reload();\n    };\n    \n    // Listen for account changes\n    const accountsChangedListener = (accounts) => {\n      if (accounts.length > 0) {\n        setAccount(accounts[0]);\n        // Re-initialize contract with new signer\n        initializeWeb3();\n      } else {\n        setIsConnected(false);\n        setAccount(null);\n      }\n    };\n    \n    // Save listener references for cleanup\n    eventListeners.current.chainChanged = chainChangedListener;\n    eventListeners.current.accountsChanged = accountsChangedListener;\n    \n    window.ethereum.on('chainChanged', chainChangedListener);\n    window.ethereum.on('accountsChanged', accountsChangedListener);\n  }, [initializeWeb3]);\n  \n  /**\n   * Cleanup event listeners\n   */\n  const cleanupEventListeners = useCallback(() => {\n    // Remove contract listeners\n    if (contract && eventListeners.current.comparison) {\n      contract.removeListener(\"ComparisonLogged\", eventListeners.current.comparison);\n    }\n    \n    // Remove ethereum provider listeners\n    if (window.ethereum) {\n      if (eventListeners.current.chainChanged) {\n        window.ethereum.removeListener('chainChanged', eventListeners.current.chainChanged);\n      }\n      if (eventListeners.current.accountsChanged) {\n        window.ethereum.removeListener('accountsChanged', eventListeners.current.accountsChanged);\n      }\n    }\n  }, [contract]);\n\n  // Initialize web3 and set up event listeners when component mounts\n  useEffect(() => {\n    const init = async () => {\n      await initializeWeb3();\n      setupEventListeners();\n    };\n    \n    init();\n    \n    // Cleanup event listeners when component unmounts\n    return () => {\n      cleanupEventListeners();\n    };\n  }, [initializeWeb3, setupEventListeners, cleanupEventListeners]);\n\n  /**\n   * Request computation function - sends a transaction to the smart contract\n   * @param {string} inputData - The data to be processed by the ZK Co-Processor\n   * @returns {Promise<object>} The transaction receipt\n   */\n  const requestComputation = useCallback(async (inputData) => {\n    if (!window.ethereum) {\n      throw new Error(\"MetaMask not installed. Please install MetaMask.\");\n    }\n    \n    if (!isConnected) {\n      // Try to connect\n      const success = await initializeWeb3();\n      if (!success) {\n        throw new Error(\"Failed to connect to wallet. Please try again.\");\n      }\n    }\n    \n    if (!contract || !signer) {\n      throw new Error(\"Web3 not initialized. Please try refreshing the page.\");\n    }\n    \n    // Make sure we're on Sepolia\n    if (!isCorrectNetwork) {\n      const switched = await switchToSepolia();\n      if (!switched) {\n        throw new Error(`Please switch to Sepolia testnet. You are currently on ${networkName}.`);\n      }\n      \n      // Wait for network switch to complete\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Re-initialize web3 after network switch\n      await initializeWeb3();\n      \n      // If still not on the correct network, throw error\n      if (!isCorrectNetwork) {\n        throw new Error(\"Network switch didn't complete properly. Please refresh and try again.\");\n      }\n    }\n    \n    setIsLoading(true);\n    \n    try {\n      // Convert input data to bytes\n      const inputBytes = ethers.utils.toUtf8Bytes(inputData);\n      \n      // Estimate the cost (task complexity based on data size)\n      const complexity = inputBytes.length;\n      const baseReward = ethers.utils.parseEther(\"0.001\");\n      // eslint-disable-next-line no-unused-vars\n      const estimatedReward = baseReward.mul(ethers.BigNumber.from(1 + Math.floor(complexity / 100)));\n      \n      // This is a testnet, so we're not using real ETH\n      // We'll just pay a minimal gas fee\n      const minimalPayment = ethers.utils.parseEther(\"0.0001\");\n      \n      // Send transaction with the reward amount (minimal on testnet)\n      const tx = await contract.requestComputation(inputBytes, { value: minimalPayment });\n      const receipt = await tx.wait();\n      \n      // After transaction, simulate a comparison for demonstration purposes\n      // In a production app, this would come from actual on-chain events\n      setTimeout(() => {\n        simulateComparison(complexity, inputData);\n      }, 2000);\n      \n      return receipt;\n    } catch (error) {\n      console.error(\"Error requesting computation:\", error);\n      throw error;\n    } finally {\n      setIsLoading(false);\n    }\n  }, [contract, signer, isConnected, isCorrectNetwork, switchToSepolia, networkName, simulateComparison, initializeWeb3]);\n\n  /**\n   * Get total tasks processed from the contract\n   * @returns {Promise<number>} Total tasks processed\n   */\n  const getTotalTasksProcessed = useCallback(async () => {\n    if (!contract) {\n      // If contract is not initialized, return mock data for demonstration\n      return 12; // Default mock value\n    }\n    \n    try {\n      const total = await contract.totalTasksProcessed();\n      return total.toNumber();\n    } catch (error) {\n      console.error(\"Error getting total tasks:\", error);\n      return 12; // Fallback to mock data on error\n    }\n  }, [contract]);\n\n  /**\n   * Get the latest comparison data\n   * @returns {Array} Array of comparison objects with zkGasUsed, normalGasUsed, timeSaved\n   */\n  const getLatestComparisons = useCallback(() => {\n    // Return the stored recent comparisons\n    if (recentComparisons.length === 0) {\n      // If no comparisons yet, return some mock data for demonstration\n      return [\n        { zkGasUsed: 25000, normalGasUsed: 75000, timeSaved: 120, isNew: false, timestamp: Date.now() - 1000 },\n        { zkGasUsed: 15000, normalGasUsed: 65000, timeSaved: 95, isNew: false, timestamp: Date.now() - 2000 },\n        { zkGasUsed: 30000, normalGasUsed: 85000, timeSaved: 150, isNew: false, timestamp: Date.now() - 3000 }\n      ];\n    }\n    return recentComparisons;\n  }, [recentComparisons]);\n\n  /**\n   * Connect to MetaMask (or other Web3 provider)\n   * @returns {Promise<boolean>} Success status\n   */\n  const connectWallet = useCallback(async () => {\n    if (!window.ethereum) {\n      alert(\"MetaMask is not installed. Please install MetaMask to use this application.\");\n      return false;\n    }\n    \n    try {\n      const success = await initializeWeb3();\n      \n      if (success && !isCorrectNetwork) {\n        await switchToSepolia();\n        // Re-initialize after network switch\n        await initializeWeb3();\n      }\n      \n      return success;\n    } catch (error) {\n      console.error(\"Error connecting to wallet:\", error);\n      return false;\n    }\n  }, [initializeWeb3, isCorrectNetwork, switchToSepolia]);\n\n  /**\n   * Toggle between Sepolia and Mainnet\n   * Switches to the opposite network from the current one\n   * @returns {Promise<boolean>} Success status\n   */\n  const toggleNetwork = useCallback(async () => {\n    if (networkId === 'sepolia') {\n      return await switchToMainnet();\n    } else {\n      return await switchToSepolia();\n    }\n  }, [networkId, switchToMainnet, switchToSepolia]);\n\n  return {\n    requestComputation,\n    getTotalTasksProcessed,\n    getLatestComparisons,\n    isConnected,\n    isCorrectNetwork,\n    account,\n    networkName,\n    networkId,\n    connectWallet,\n    switchToSepolia,\n    switchToMainnet,\n    toggleNetwork,\n    isLoading,\n    initialized\n  };\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}